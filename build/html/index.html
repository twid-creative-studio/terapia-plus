//= module/header.html

<div class="main index">
	<div class="main-slider full">
		<ul class="mainSlider" id="main-slider">
			<li>
				<div class="item item_gender">
					<a href="#" class="men">
						<div class="block_icon"></div>
						<div class="main_block">
							<div class="front"></div>
							<div class="back"></div>
							<div class="title">MEN</div>
						</div>
						
						<div class="subTitle">мужские очки</div>
					</a>
					<a href="#" class="women">
						<div class="block_icon"></div>
						<div class="main_block">
							<div class="back"></div>
							<div class="title">W</div>
							<div class="title">OM</div>
							<div class="title">EN</div>
						</div>
						<div class="subTitle">женские очки</div>
					</a>
				</div>
			</li>
			<li>
				<div class="item item_showroom">
					<a href="#" class="showroom">
						<div class="block_icon"></div>
						<div class="main_block">
							<div class="front"></div>
							<div class="back"></div>
							<div class="title">sho</div>
							<div class="title">wr</div>
							<div class="title">ooom</div>
						</div>						
						<div class="subTitle">ПОСЕТИТЕ НАШ шоурум в цетре киева</div>
					</a>
				</div>
			</li>
			<li>
				<div class="item item_magicday">
					<a href="#" class="magicday">
						<div class="block_icon"></div>
						<div class="main_block">
							<div class="back"></div>
						</div>	
						<div class="title">magicday</div>					
						<div class="subTitle">УЗНАЙТЕ О НАШИХ АКЦИЯХ</div>
					</a>
				</div>
			</li>
		</ul>


		<a href="#catalog" class="btn-scrolldown anchor"><span>в каталог</span></a>
	</div>
	<div class="catalog" id="catalog">
		<a href="#" class="items">
			<img src="img/IMG_5661.png" data-hover="img/IMG_5661_hover.png" alt="photo">
			<div class="info">
				<p class="title">tom ford <span>confessions</span></p>
				<p class="price">34700 uah</p>
			</div>
		</a>
		<a href="#" class="items">
			<img src="img/IMG_5501.png" data-hover="img/IMG_5661_hover.png" alt="photo">
			<div class="info">
				<p class="title">tom ford <span>confessions</span></p>
				<p class="price">34700 uah</p>
			</div>
		</a>
		<a href="#" class="items">
			<img src="img/IMG_5650.png" data-hover="img/IMG_5661_hover.png" alt="photo">
			<div class="info">
				<p class="title">tom ford <span>confessions</span></p>
				<p class="price">34700 uah</p>
			</div>
		</a>
		<a href="#" class="items">
			<img src="img/IMG_5864.png" data-hover="img/IMG_5661_hover.png" alt="photo">
			<div class="info">
				<p class="title">tom ford <span>confessions</span></p>
				<p class="price">34700 uah</p>
			</div>
		</a>
		<div class="line showroom">
			<a href="#"><h3><b>посетите</b> наш <b>шоурум</b></h3></a>
		</div>
		<a href="#" class="items">
			<img src="img/IMG_5661.png" data-hover="img/IMG_5661_hover.png" alt="photo">
			<div class="info">
				<p class="title">tom ford <span>confessions</span></p>
				<p class="price">34700 uah</p>
			</div>
		</a>
		<a href="#" class="items">
			<img src="img/IMG_5501.png" data-hover="img/IMG_5661_hover.png" alt="photo">
			<div class="info">
				<p class="title">tom ford <span>confessions</span></p>
				<p class="price">34700 uah</p>
			</div>
		</a>
		<a href="#" class="items">
			<img src="img/IMG_5650.png" data-hover="img/IMG_5661_hover.png" alt="photo">
			<div class="info">
				<p class="title">tom ford <span>confessions</span></p>
				<p class="price">34700 uah</p>
			</div>
		</a>
		<a href="#" class="items">
			<img src="img/IMG_5864.png" data-hover="img/IMG_5661_hover.png" alt="photo">
			<div class="info">
				<p class="title">tom ford <span>confessions</span></p>
				<p class="price">34700 uah</p>
			</div>
		</a>
		<div class="line delivery">
			<a href="#"><h3>бесплатная <b>доставка</b></h3></a>
		</div>
		<a href="#" class="items">
			<img src="img/IMG_5650.png" data-hover="img/IMG_5661_hover.png" alt="photo">
			<div class="info">
				<p class="title">tom ford <span>confessions</span></p>
				<p class="price">34700 uah</p>
			</div>
		</a>
		<a href="#" class="items">
			<img src="img/IMG_5864.png" data-hover="img/IMG_5661_hover.png" alt="photo">
			<div class="info">
				<p class="title">tom ford <span>confessions</span></p>
				<p class="price">34700 uah</p>
			</div>
		</a>
	</div>
	<nav class="pagination">
	    <ul>
	        <li class="pagination-prev"><a href="#"><span>назад</span></a></li>
	        <li class="pagination-number"><a href="#">1</a></li>
	        <li class="pagination-number pagination-current"><a href="#">2</a></li>
	        <li class="pagination-number"><a href="#">3</a></li>
	        <li class="pagination-number"><a href="#">4</a></li>
	        <li class="pagination-number"><a href="#">5</a></li>
	        <li class="pagination-number"><a href="#">...</a></li>
	        <li class="pagination-next"><a href="#"><span>вперед</span></a></li>
	    </ul>
	</nav>
</div>

//= module/footer.html

<link rel="stylesheet" href="css/lightslider.css">
<script src="js/lightslider.js"></script>

<script>
	var doc_scroll = 0,
		catalog_box = 0;


	$(document).ready(function () {
		if($(window).width() >= 1024){
			check_height();
		 }else if($(window).width() < 1024){
			$('.full').outerHeight(0);
		}
	});

	function check_height(){
		$('.full').outerHeight($(window).height() - 57);
		$('.main-slider .item').outerHeight($(window).height() - 57);
		if($('.pagination ul li').length < 8){
			$('.pagination').addClass('seven');
		}
	}

	$(window).on('load', function(){

		catalog_box = $('#catalog').offset().top;
	
		mainSlider = $('#main-slider').lightSlider({
			item:1,
			slideMargin:0,
			auto: true,
			loop: true,
			mode: 'fade',
			speed: 1500,
			keyPress: true,
			pause: 10000,
			pager: false,
			responsive: true
		});
		resizeSlider();
	});

	$(document).on('scroll',function(e) {

		//Контроль видимости кнопки фильтров
		doc_scroll = $(this).scrollTop();

		if(doc_scroll >= catalog_box - $(window).height()/2){
			if(doc_scroll + $(window).height() - 57 >= catalog_box + $('#catalog').outerHeight() - 57){
				$('.btn-filters-block').stop(true).fadeOut();
			} else{
				$('.btn-filters-block').stop(true, true).fadeIn();
			}
		} else if(doc_scroll <= catalog_box){
			$('.btn-filters-block').stop(true, true).fadeOut();
		}

	});
	
	var itemHeught = 0,
		winHeight = $(window).height()-57,
		winWidth = $(window).width()/2,
		cof = 1,
		cofW = 1;

	$(window).resize(function () {

		catalog_box = $('#catalog').offset().top;
		
		mainSlider.destroy();

		if($(window).width() >= 1024){
			$('.full').outerHeight($(window).height() - 57);

			mainSlider = $('#main-slider').lightSlider({
				item:1,
				slideMargin:0,
				auto: true,
				loop: true,
				mode: 'fade',
				speed: 1500,
				keyPress: true,
				pause: 5000,
				pager: false,
				responsive: true
			});

			check_height();
			resizeSlider();
		} else if($(window).width() < 1024){
			$('.full').outerHeight(0);
		}
	});	

	function resizeSlider(){

		winHeight = $(window).height()-57;
		winWidth = $(window).width()/2;

		itemHeught = $('.main-slider li .item > a').outerHeight();

		if($(window).width() == 1024){
			cof = 1 - ((itemHeught* 0.9/winHeight)-1 * 0.85);
		} else{
			cof = winHeight/itemHeught;
		}

		if(winWidth > 640){
			cofW = winWidth/640;
		} else if(winWidth < 640){
			cofW = 640/winWidth;
		}


		$('.main-slider .item > a').addClass('is-scale');
		
		$('.main-slider .item > a.is-scale').css('transform', 'scale(' + cof + ') translateY(-' + (50 - (50 * (cof-1))) + '%)');

	}

</script>